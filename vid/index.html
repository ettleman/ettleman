<!DOCTYPE html>
<html>
<head>
    <title>Torrent Streamer</title>
</head>
<body>
    
    <h1>WebTorrent Test</h1>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (WebTorrent) {
                console.log("WebTorrent is loaded");
            } else {
                console.log("WebTorrent is not loaded");
            }
        });
    </script>
    
    
    
    <h1>Torrent Video Streamer</h1>
    <input type="text" id="magnetInput" placeholder="Paste magnet link here">
    <button onclick="streamTorrent()">Stream Video</button>
    <video id="videoPlayer" controls></video>

    <!-- Make sure this path is correct -->
    <script src="webtorrent.min.js" type="text/javascript"></script>

    
    <script>
        function streamTorrent() {
            var magnetLink = document.getElementById('magnetInput').value;
            var client = new WebTorrent();

            client.add(magnetLink, function (torrent) {
                var file = torrent.files.find(function (file) {
                    return file.name.endsWith('.mp4'); // Check for video file
                });

                // Stream the file in the browser
                file.renderTo('video#videoPlayer');
            });
        }
    </script>
</body>
</html>
